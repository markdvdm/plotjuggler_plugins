namespace ib.feedback;

enum HealthLevel : uint8 {
  Unknown = 0,
  Normal,
  Advisory,
  Caution,
  Warning,
  Count,
}

struct ResultsBitMasks {
  normal : uint32 ;
  advisory : uint32;
  caution : uint32;
  warning : uint32;
}

struct HealthReport {
  health_level : HealthLevel;
  health_results : ResultsBitMasks;
}

struct ActuatorServoState {
  current_position_deg : float;
  commanded_position_deg : float;
  current_ma : int16;
  motor_temp_c : int16;
  health_report : HealthReport;
}

struct ActuatorVlState {
  fault : uint8 = 0;
  controller_state : uint8;
  motor_current_amps : float;
  setpoint_current_amps :float;
  motor_rpm : int16;
  dc_bus_voltage : int16;
  motor_temp_one : int16;
  motor_temp_two : int16;
  controller_temp : int16;
  health_report : HealthReport;
}

table ActuatorIronBirdState {
  vl3 : ActuatorVlState;
  vl4 : ActuatorVlState;
  vl7 : ActuatorVlState;
  vl8 : ActuatorVlState;
  servo4 : ActuatorServoState;
  servo5 : ActuatorServoState;
  servo6 : ActuatorServoState;
}

root_type ActuatorIronBirdState;
